# Dynamic Diffuse Global Illumination with Ray-Traced Irradiance Fields

> Citation: Zander Majercik, Jean-Philippe Guertin, Derek Nowrouzezahrai, and Morgan McGuire, Dynamic Diffuse Global Illumination with Ray-Traced Irradiance Fields, Journal of Computer Graphics Techniques (JCGT), vol. 8, no. 2, 1-30, 2019  
> Available online http://jcgt.org/published/0008/02/01/

## 摘要

本文提出了一种高效地计算动态场景地全局光照地方法，我们基于传统地辐射度探针，对场景地辐照场进行压缩编码。
1. 使用一种高效的GPU内存布局、几何光线追踪和合适地采样速率计算动态辐照场。
2. 设计一种稳定地辐照滤波查询，并引入了一种新的基于瞬时可见度感知的插值算法。
3. 本文通过实验探讨了性能和精度的取舍，结果表明本文的关于动态全局光照的方法可适用于各种几何复杂度和光照复杂度的场景。
为了证明结果的完整性，我们附带了一个使用全动态光场采样的光线追踪展示和相关的GLSL代码

## 介绍

* 基于探针的全局光照：  

    使用精确的全局光照（GI）效果合成图像，可显著增强计算机生成的影像的可信性。如何精确地求解基于物理地全局光照方程是一个长期的研究领域，即使是在离线渲染中算是非常耗时的。为了在实时渲染中生成较真实的全局光照效果，人们提出了许多不同的方法来减少光照的计算量。每种方法都在精确度、灵活性和性能表现上做了不同的取舍。

    近年来一些关于光场探针的研究就体现了这种取舍。该方法使用静止的经过预计算的辐照探针来表示场景中的静态光场[McGuire et al. 2017b]。这种使用探针的的表示方法有许多优点，例如可以高效和精确地使用光线追踪计算间接反射高光，同时支持类辐射探针查询，以获得更平滑地间接漫发射照明。

    通过对光场探针地查询和采样操作，可以以此为基础实现许多着色算法，可以以较高地速率实现高质量地渲染。传统光场探针地主要限制为对场景光照的预计算采样类型及方法。由于探针数据的预计算比较耗时，因此只能处理固定的光源和物体。除此之外，在计算间接光照时，辐照度的空间插值和滤波会产生锯齿和漏光。

* 实时全局光照

    与离线渲染不同，像游戏之类的实时程序中的全局光照方法大多依赖于可以根据空间角度获取的光照数据。这些数据一般是预先计算所得，或者仅限于更新频率低的静态几何物体。实现方法主要有光照贴图、辐照探针、场景或光源的体素化等。每种方法都在复杂度、运行灵活性、精确度和消耗上做了不同地取舍。在物体或光照复杂的场景，这些方法都有难以避免的缺陷，最主要的缺陷就是在有许多物体互相遮挡时，由于采样不足和图像重建中的损失，常常发生阴影和光照的泄露。近些年在GDC和SIGGRAPH上有许多关于这些问题的讨论。本文展示了其中两种具有代表性的方法。

    同时，也有多探索性的工作。这些尝试有不同的美术和技术限制。在只考虑静态物体或光照时，常常使用后处理来实现。当然，像这种方法不适用于复杂场景并且仍需要离线预计算。由于动态场景中场景物体和光照会在运行时变化，因此这些方法不适用于动态场景。因此，实时渲染需要一种能适用于动态场景且不牺牲过多性能的全局光照算法。

    之前的技术的关键问题是缺少可见性信息，无法对光照场或辐照场进行编码（光照场和辐照场的区别是辐照场将遮蔽考虑在内）。

    本文基于传统的辐照探针方法提出了一种新的辐照场表示方法，该方法可以在运行时进行高效地更新。本文也对该方法的性能和质量进行了评估。

本文的主要贡献包括：

* 通过增量方案，使用紧凑的 GPU 定制数据布局和计算规划，用准确和动态的遮挡信息扩展辐照度探头，以实现可以"无限"反射的漫反射全局光照。

* 一种光线追踪实现的辐照探针算法，该算法不受分辨率和帧率的影响，避免了对高分辨率球形贴图的降噪和滤波。

* 一种空间插值、遮蔽和滤波的规划算法，可以更好地适用于动态场景地辐照度查询。

* 一种适用于许多情形的对路径追踪结果的快速近似算法。该算法支持带有遮挡的可动态更新辐照信息和基于GPU的光线追踪高光反射，可以有效地减少锯齿。

* 开源的用于实现动态漫反射全局光照的相关shader代码，这些代码应与开源的G3D Innovation Engine[McGuire et al.2017a]一起使用。


